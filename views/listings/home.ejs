<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="../photos/logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TripNest</title>
    <!-- Import Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
</head>
<body>
    <!-- Include Navigation Bar -->
    <%- include("../includes/navbar.ejs") %>

    <!-- Include Flash Message Alerts -->
    <%- include("../includes/flash.ejs") %>

    <main class="content">
        <!-- Include Filters Section -->
        <%- include("../includes/filters.ejs") %>

        <!-- Listings Grid -->
        <div class="row row-cols-lg-4 row-cols-md-2 row-cols-sm-1 mt-3">
        
        <!-- Loop through listings and display each one -->
        <% for (let listing of listings) { %>
            <!-- Wrap the card in a link to listing details page -->
            <a href="/listings/<%= listing.id %>" class="card-listing-link">
                <div class="card col">
                    
                    <!-- Overlay text on image -->
                    <div class="card-img-overlay">
                        <h4>Show Details</h4>
                    </div>

                    <!-- Listing Image -->
                    <img src="<%= listing.image.url %>" class="card-img-top" alt="listing_image" style="height: 20rem;">
                    
                    <!-- Listing Content -->
                    <div class="card-body">
                        <p class="card-text"><%= listing.title %></p>
                        <p class="card-price">
                            &#8377; <%= listing.price.toLocaleString("en-IN") %> / night 
                            <span class="tax-info">&nbsp;+18% GST</span>
                        </p>
                    </div>
                </div>
            </a>
        <% } %>
        </div>
    </main>

    <!-- Include Footer -->
    <%- include("../includes/footer.ejs") %>
</body>
</html>
